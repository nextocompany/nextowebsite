---
phase: 03-quality-ship
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/layout.tsx
  - src/app/globals.css
  - src/app/sitemap.ts
  - src/app/robots.ts
  - src/components/layout/Header.tsx
  - src/components/sections/Contact.tsx
  - src/components/sections/HowWeWork.tsx
  - public/og-placeholder.png
autonomous: true
requirements:
  - TECH-02
  - TECH-03
  - TECH-04
  - TECH-05
  - SEO-01
  - SEO-02
  - SEO-03
  - SEO-04
  - SEO-05
  - SEO-06

must_haves:
  truths:
    - "Browser tab shows 'Nexto — Your operations simplified'"
    - "Sharing URL on social shows OG title, description, and image"
    - "robots.txt is reachable at /robots.txt after build"
    - "sitemap.xml is reachable at /sitemap.xml after build"
    - "All teal-on-white text passes WCAG AA contrast (4.5:1 for normal, 3:1 for large)"
    - "Keyboard tab reaches every nav link and button with visible focus ring"
    - "Google Analytics gtag.js loads after page interaction"
  artifacts:
    - path: "src/app/layout.tsx"
      provides: "Full metadata object + GA Script tags"
      contains: "metadataBase"
    - path: "src/app/sitemap.ts"
      provides: "Sitemap generation"
      exports: ["default"]
    - path: "src/app/robots.ts"
      provides: "Robots.txt generation"
      exports: ["default"]
    - path: "src/app/globals.css"
      provides: "Focus-visible ring styles"
      contains: "focus-visible"
    - path: "public/og-placeholder.png"
      provides: "OG image placeholder"
  key_links:
    - from: "src/app/layout.tsx"
      to: "public/og-placeholder.png"
      via: "metadata.openGraph.images url"
      pattern: "og-placeholder\\.png"
    - from: "src/app/sitemap.ts"
      to: "https://nexto.co.th"
      via: "sitemap URL entries"
      pattern: "nexto\\.co\\.th"
    - from: "src/app/layout.tsx"
      to: "googletagmanager.com"
      via: "Script src"
      pattern: "gtag/js\\?id=G-62ZB83X2YZ"
---

<objective>
Add SEO metadata, Google Analytics, accessibility fixes, and SEO file conventions to the site.

Purpose: The site needs proper metadata for search engines and social sharing, accessible color contrast and focus indicators for WCAG AA, and GA tracking — all prerequisites before shipping.
Output: Updated layout.tsx with full metadata + GA, new sitemap.ts and robots.ts, contrast-fixed components, focus ring styles, OG placeholder image.
</objective>

<execution_context>
@/Users/nex/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nex/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-quality-ship/03-RESEARCH.md
@src/app/layout.tsx
@src/app/globals.css
@src/components/layout/Header.tsx
@src/components/sections/Contact.tsx
@src/components/sections/HowWeWork.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: SEO metadata, OG tags, GA scripts, sitemap, and robots</name>
  <files>
    src/app/layout.tsx
    src/app/sitemap.ts
    src/app/robots.ts
    public/og-placeholder.png
  </files>
  <action>
    **layout.tsx** — Replace the existing metadata export with the full metadata object:
    - `metadataBase: new URL('https://nexto.co.th')` (MUST be set or OG image relative URL causes build error)
    - `title: 'Nexto — Your operations simplified'` (per user decision — exact string)
    - `description`: Claude writes a concise one-sentence summary of what Nexto does
    - `alternates.canonical: '/'`
    - `openGraph`: title, description, url, siteName 'Nexto', images array with `/og-placeholder.png` (1200x630), locale 'en_US', type 'website'
    - `robots: { index: true, follow: true }`

    Add Google Analytics via `next/script` (import Script from 'next/script'). Place AFTER the closing `</body>` but inside `<html>`:
    - External script: `src="https://www.googletagmanager.com/gtag/js?id=G-62ZB83X2YZ"` with `strategy="afterInteractive"` and `async` prop
    - Inline script: `id="gtag-init"` with `strategy="afterInteractive"` containing the exact gtag config snippet:
      ```
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-62ZB83X2YZ');
      ```
    Do NOT use `strategy="beforeInteractive"` — it blocks page load and kills Lighthouse performance.

    **sitemap.ts** — Create `src/app/sitemap.ts` exporting a default function returning `MetadataRoute.Sitemap` array with two entries:
    - `https://nexto.co.th` (priority 1, changeFrequency 'monthly')
    - `https://nexto.co.th/privacy` (priority 0.3, changeFrequency 'yearly')

    **robots.ts** — Create `src/app/robots.ts` exporting a default function returning `MetadataRoute.Robots` with rules `{ userAgent: '*', allow: '/' }` and sitemap `https://nexto.co.th/sitemap.xml`.

    **OG placeholder** — Create a minimal 1200x630 PNG at `public/og-placeholder.png`. Use a simple solid teal (#2EC4B6) background with white "Nexto" text centered. This is a placeholder the user will replace. Generate it programmatically (e.g., via a quick Node script using canvas, or find another CLI approach). If no image generation tool is available, create a minimal valid PNG file and note the user should replace it.
  </action>
  <verify>
    Run `npm run build` — must complete without errors. Check that `out/sitemap.xml` and `out/robots.txt` exist in the build output. Inspect `out/index.html` for the presence of: og:title meta tag, og:image meta tag, canonical link, description meta tag.
  </verify>
  <done>
    Build succeeds. `out/sitemap.xml` contains both URLs. `out/robots.txt` contains Allow directive and sitemap reference. `out/index.html` has correct title, description, OG tags, and canonical URL. GA script tags are present in the HTML output.
  </done>
</task>

<task type="auto">
  <name>Task 2: Accessibility — contrast fixes and focus ring</name>
  <files>
    src/app/globals.css
    src/components/layout/Header.tsx
    src/components/sections/Contact.tsx
    src/components/sections/HowWeWork.tsx
  </files>
  <action>
    **Contrast fixes** — Brand teal #2EC4B6 on white has contrast ratio 2.17:1, failing WCAG AA (needs 4.5:1 for normal text, 3:1 for large). Fix all violations:

    **Contact.tsx** — The `text-[10px] font-mono tracking-widest text-brand-teal uppercase` labels ("Email", "Line", "Facebook", "Telephone") at 10px are critically low contrast. Change `text-brand-teal` to `text-neutral-500` on these label spans. The uppercase mono tracking-widest style already provides visual distinction without needing color. Also change `group-hover:text-brand-teal` on the value spans to `group-hover:text-neutral-600` or keep as-is since hover states are transient (WCAG does not require hover states to meet contrast).

    **HowWeWork.tsx** — The `text-[10px] font-mono tracking-widest text-brand-teal uppercase` step labels have the same issue. Change `text-brand-teal` to `text-neutral-500`.

    **Header.tsx** — The active nav link uses `text-brand-teal` at `text-xl` (20px non-bold). 20px non-bold does NOT qualify as "large text" under WCAG (needs 18.66px+ bold or 24px+ regular). Change to a darkened teal that passes AA. Add a CSS variable `--color-brand-teal-dark: #0f786f` to globals.css @theme block, then use `text-brand-teal-dark` for the active nav state. Also check the Connect CTA hover state — `hover:text-brand-teal` is transient (hover), so it is acceptable per WCAG.

    **Footer.tsx hover states** — The `hover:text-brand-teal` on footer links is acceptable since hover states are transient. No change needed.

    **Products.tsx hover states** — The `group-hover:text-brand-teal` states are transient. No change needed.

    **Focus ring** — Add to globals.css inside the existing `@layer base` block:
    ```css
    :focus-visible {
      outline-width: 2px;
      outline-style: solid;
      outline-offset: 2px;
      outline-color: #0f786f; /* darkened teal, 5.33:1 on white */
    }
    ```
    Use plain CSS properties (not @apply with outline-*) since the hex color is custom. This applies globally to all keyboard-focusable elements (links, buttons).

    **Also add `--color-brand-teal-dark: #0f786f`** to the @theme block in globals.css so it can be used as `text-brand-teal-dark` in components.
  </action>
  <verify>
    Run `npm run build` — must complete without errors. Manually verify in the source that no `text-brand-teal` remains on small static text (10px labels in Contact and HowWeWork should now use neutral-500). The active nav link in Header should use the darkened teal. Focus-visible rule should be present in globals.css.
  </verify>
  <done>
    All teal-on-white static text uses either neutral-500 (small labels) or darkened teal #0f786f (active nav). Hover states left as-is (transient). Global focus-visible ring applied with darkened teal at 5.33:1 contrast. Build passes clean.
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- `out/index.html` contains: `<title>Nexto — Your operations simplified</title>`, `og:title`, `og:image`, `canonical` link
- `out/sitemap.xml` exists with 2 URL entries
- `out/robots.txt` exists with Allow and sitemap directives
- No `text-brand-teal` on static small text (grep confirms labels changed)
- `focus-visible` rule present in globals.css
- GA script tags present in built HTML
</verification>

<success_criteria>
Build succeeds. SEO metadata renders correctly in HTML output. Sitemap and robots.txt generated. All teal text contrast issues fixed. Focus ring applied globally. GA scripts included with afterInteractive strategy.
</success_criteria>

<output>
After completion, create `.planning/phases/03-quality-ship/03-01-SUMMARY.md`
</output>
